Super projet, Magaliâ€¯! Voici un tutoriel complet et accessible pour mettre en place un environnement de dÃ©veloppement moderne sur Ubuntu 18.04, en utilisant Docker pour contourner les limitations de ton systÃ¨me. On va tout couvrir, Ã©tape par Ã©tape ğŸ› ï¸ğŸ§ğŸ

---

# ğŸ§° Tutoriel : Environnement de dÃ©veloppement Python/Ansible avec Docker sur Ubuntu 18.04

## ğŸ—ºï¸ Objectif
CrÃ©er un environnement de dÃ©veloppement moderne, isolÃ© dans des conteneurs Docker, pour travailler avec Python, Ansible, Git, et Visual Studio Code, tout en synchronisant les sources avec GitLab.

---

## 1ï¸âƒ£ PrÃ©-requis : Mise Ã  jour du systÃ¨me

Ubuntu 18.04 est en fin de vie, donc certaines versions de logiciels peuvent Ãªtre obsolÃ¨tes. On commence par mettre Ã  jour ce qui est possible :

```bash
sudo apt update && sudo apt upgrade -y
```

Ensuite, installe quelques outils de base :

```bash
sudo apt install -y curl wget gnupg lsb-release software-properties-common
```

---

## 2ï¸âƒ£ Installation des outils de base

### ğŸ™ Git

```bash
sudo apt install -y git
git config --global user.name "TonNom"
git config --global user.email "ton.email@example.com"
```

### ğŸ³ Docker

Ubuntu 18.04 ne fournit pas la derniÃ¨re version de Docker. On installe depuis le dÃ©pÃ´t officiel :

```bash
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) stable"

sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io
```

Ajoute ton utilisateur au groupe `docker` pour Ã©viter dâ€™utiliser `sudo` Ã  chaque fois :

```bash
sudo usermod -aG docker $USER
newgrp docker
```

Teste :

```bash
docker run hello-world
```

### ğŸ§  VS Code

La version via `apt` est souvent ancienne. Pour une version plus rÃ©cente :

```bash
wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor > microsoft.gpg
sudo install -o root -g root -m 644 microsoft.gpg /etc/apt/trusted.gpg.d/
sudo sh -c 'echo "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main" > /etc/apt/sources.list.d/vscode.list'
sudo apt update
sudo apt install -y code
```

---

## 3ï¸âƒ£ CrÃ©ation du projet local

CrÃ©e un dossier pour ton projet :

```bash
mkdir -p ~/dev/mon-projet
cd ~/dev/mon-projet
git init
```

---

## 4ï¸âƒ£ ğŸ”§ Dockerfile pour Python + Ansible

CrÃ©e un fichier `Dockerfile` :

```Dockerfile
# Dockerfile
FROM python:3.11-slim

# Installer Ansible
RUN pip install --no-cache-dir ansible

# CrÃ©er un utilisateur non-root
RUN useradd -ms /bin/bash devuser
USER devuser
WORKDIR /home/devuser/app

# Copier les sources (optionnel si montÃ©s plus tard)
# COPY . .

CMD ["bash"]
```

---

## 5ï¸âƒ£ ğŸ—ï¸ Construction et exÃ©cution du conteneur

Dans le dossier du projet :

```bash
docker build -t dev-python-ansible .
```

Lance le conteneur en montant ton dossier local :

```bash
docker run -it --rm \
  -v ~/dev/mon-projet:/home/devuser/app \
  --name dev-env \
  dev-python-ansible
```

Tu es maintenant dans un shell isolÃ© avec Python et Ansible ğŸ‰

---

## 6ï¸âƒ£ ğŸ§ª Tests de fonctionnement

### âœ… Python

```bash
python --version
python -c "print('Hello from Python!')"
```

### âœ… Ansible

```bash
ansible --version
ansible localhost -m ping --connection=local
```

---

## 7ï¸âƒ£ ğŸ”— Synchronisation avec GitLab

### Ã‰tapes :

1. CrÃ©e un dÃ©pÃ´t sur GitLab.
2. RÃ©cupÃ¨re lâ€™URL du dÃ©pÃ´t (ex : `git@gitlab.com:utilisateur/mon-projet.git`)
3. Ajoute le dÃ©pÃ´t distant :

```bash
git remote add origin git@gitlab.com:utilisateur/mon-projet.git
```

4. Ajoute tes fichiers et pousse :

```bash
git add .
git commit -m "Initial commit"
git push -u origin master
```

ğŸ’¡ Astuce : utilise une clÃ© SSH pour Ã©viter de taper ton mot de passe Ã  chaque fois. GÃ©nÃ¨re-la avec :

```bash
ssh-keygen -t ed25519 -C "ton.email@example.com"
cat ~/.ssh/id_ed25519.pub
```

Ajoute la clÃ© publique dans GitLab (ParamÃ¨tres > SSH Keys).

---

## 8ï¸âƒ£ ğŸ§¼ Conseils de maintenance sur Ubuntu 18.04

- Utilise Docker pour encapsuler les outils rÃ©cents.
- Mets Ã  jour Docker et VS Code via leurs dÃ©pÃ´ts officiels.
- Pour Python, utilise des images Docker officielles (`python:3.11`, etc.).
- Pour Ansible, installe via `pip` dans le conteneur.
- Garde tes sources hors du conteneur pour faciliter la synchronisation et lâ€™Ã©dition.
- Utilise des volumes Docker pour persister les donnÃ©es.

---

## ğŸ§  Bonus : VS Code + Docker

Installe lâ€™extension **Remote - Containers** dans VS Code pour Ã©diter directement les fichiers dans le conteneur :

1. Ouvre VS Code
2. Installe lâ€™extension "Remote - Containers"
3. CrÃ©e un fichier `.devcontainer/devcontainer.json` :

```json
{
  "name": "Python Ansible Dev",
  "build": {
    "dockerfile": "../Dockerfile"
  },
  "workspaceFolder": "/home/devuser/app",
  "mounts": [
    "source=${localWorkspaceFolder},target=/home/devuser/app,type=bind"
  ]
}
```

4. Ouvre le dossier dans VS Code et choisis "Reopen in Container"

---

## ğŸ Conclusion

Tu as maintenant un environnement moderne, isolÃ©, et maintenable pour dÃ©velopper en Python et Ansible, mÃªme sur une vieille Ubuntu 18.04. GrÃ¢ce Ã  Docker, tu contournes les limitations du systÃ¨me tout en gardant une intÃ©gration fluide avec GitLab et VS Code.

Si tu veux aller plus loin, je peux tâ€™aider Ã  ajouter des tests automatisÃ©s, des rÃ´les Ansible, ou mÃªme du CI/CD avec GitLab. Tu veux quâ€™on explore Ã§a ensuiteâ€¯?
