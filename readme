Le terme "CICSplex distributor" fait généralement référence à la fonction de gestion de la charge de travail (Workload Management - WLM) au sein d'un environnement CICSPlex sous z/OS, en collaboration avec d'autres composants de distribution comme le Sysplex Distributor de z/OS. Il ne s'agit pas d'un produit logiciel distinct appelé "CICSplex distributor".
En résumé, il s'agit du mécanisme permettant de distribuer efficacement les transactions CICS sur un ensemble de régions CICS interconnectées (un CICSplex) pour optimiser les performances et garantir la haute disponibilité.
1. Composants de Distribution de Charge de Travail
La gestion de la charge de travail pour les applications CICS dans un environnement z/OS Sysplex est réalisée à plusieurs niveaux, impliquant plusieurs composants :
A. Sysplex Distributor (Composant z/OS)
Le Sysplex Distributor est une fonction du réseau TCP/IP de z/OS. Son rôle est de distribuer les requêtes réseau entrantes (par exemple, les requêtes HTTP) vers un groupe de piles TCP/IP et de régions CICS (régions de routage, ou TOR - Terminal-Owning Region) au sein du z/OS Sysplex.
 * Objectif : Équilibrer le trafic IP initial sur plusieurs systèmes z/OS et piles TCP/IP, augmentant ainsi l'efficacité du Sysplex et la haute disponibilité (en permettant la défaillance d'une pile ou d'une région sans interruption).
B. Gestion de Charge de Travail CICSPlex SM (WLM)
Le véritable "distributeur" au niveau de CICS est le composant Workload Management (WLM) du CICSPlex System Manager (CICSPlex SM).
 * Objectif : Une fois qu'une transaction est arrivée dans une région CICS de routage (TOR), le CICSPlex SM WLM prend le relais pour déterminer vers quelle région CICS d'application (AOR - Application-Owning Region) envoyer la transaction pour son exécution.
 * Granularité : Il offre le contrôle le plus fin (le plus granulaire) sur l'exécution de la charge de travail à l'intérieur de CICS.
 * Sélection : Le CICSPlex SM sélectionne la région la plus efficace, en se basant sur des critères prédéterminés et l'état de la charge de travail en temps réel (comme la capacité des régions), afin que le travail s'exécute le plus efficacement possible.
2. Le Rôle du CICSPlex SM
Le CICSPlex System Manager (CICSPlex SM) est l'outil d'administration système de CICS Transaction Server for z/OS qui permet de gérer plusieurs systèmes CICS (le CICSplex) à partir d'un point de contrôle unique.
Ses fonctions clés, y compris la distribution de la charge, fournissent :
 * Image Système Unique (Single System Image) : Permet de voir et de gérer l'ensemble des régions CICS comme une seule entité logique.
 * Gestion de la Charge de Travail (WLM) : Le composant qui effectue la distribution et le routage dynamique des transactions vers la région CICS la plus appropriée et la moins sollicitée du CICSplex.
 * Haute Disponibilité : Assure que si une région CICS tombe en panne, les nouvelles requêtes sont automatiquement acheminées vers les régions saines.

_________


L'IPL (Initial Program Load) d'une LPAR (Logical Partition) dans un Sysplex est un événement que le Sysplex Distributor est spécifiquement conçu pour gérer, afin de garantir la haute disponibilité et le routage continu des connexions réseau (TCP/IP).
Voici comment l'IPL affecte et est affecté par le Sysplex Distributor.
1. Impact de l'IPL d'une LPAR sur le Sysplex Distributor
Lorsqu'une LPAR (cible ou distributrice) est arrêtée pour un IPL, le Sysplex Distributor réagit de manière dynamique pour maintenir le service :
1.1. LPAR Cible (Target LPAR) en Arrêt
Si une LPAR cible (Target LPAR), qui exécute des applications desservies par le Sysplex Distributor, est arrêtée :
 * Notification Immédiate : Les piles TCP/IP des autres LPAR sont notifiées de l'arrêt via les mécanismes de communication du Sysplex (XCF).
 * Mise à Jour du Routage : La pile TCP/IP faisant office de Distributor (qui détient l'adresse Distributed Dynamic VIPA - DVIPA) retire immédiatement cette LPAR de la liste des destinations disponibles pour le port concerné.
 * Continuité du Service : Les nouvelles connexions entrantes continuent d'être distribuées aux LPAR restantes saines, assurant la continuité du service sans interruption visible pour le client (si d'autres LPAR cibles sont disponibles).
 * Connexions Existantes : Toutes les connexions existantes sur la LPAR arrêtée sont perdues. Les clients devront se reconnecter, mais la nouvelle tentative sera acheminée vers une LPAR disponible.
1.2. LPAR Distributrice (Distributor LPAR) en Arrêt
Si la LPAR qui est le Distributor primaire (celle qui détient l'adresse DVIPA active et route le trafic) est arrêtée :
 * Basculement Automatique (Takeover) : Le rôle de Distributor bascule automatiquement et de manière non-disruptive vers une LPAR de secours (Backup Distributor ou Hot Standby) désignée dans la configuration DVIPA.
 * Reprise du Routage : La LPAR de secours prend possession de l'adresse DVIPA et assume le rôle de routage des nouvelles connexions.
 * Haute Disponibilité : Ce mécanisme est crucial pour la haute disponibilité. Il permet d'effectuer un IPL de la LPAR distributrice sans interrompre l'accès au service.
2. Effet de l'IPL d'une LPAR sur le Sysplex Distributor
Lorsqu'une LPAR effectue un IPL et redémarre :
 * Initialisation : Pendant l'IPL de z/OS, les services système critiques comme les services de clustering Sysplex (XCF) et la pile TCP/IP sont démarrés.
 * Enregistrement : Lorsque la pile TCP/IP de la LPAR redémarre, elle s'enregistre auprès des services Sysplex et signale sa présence et son état de santé (Workload Manager - WLM) aux autres LPAR du Sysplex, y compris la LPAR distributrice.
 * Réintégration comme Cible : Si la LPAR redémarrée est une LPAR cible (target) des DVIPA distribués :
   * Le Sysplex Distributor est informé que les applications sur cette LPAR sont à nouveau disponibles (par exemple, CICS a redémarré ses listeners).
   * Le Sysplex Distributor réintègre la LPAR dans son pool de distribution. Les nouvelles connexions seront alors routées vers cette LPAR, en fonction de sa capacité CPU signalée par WLM.
 * Reprise du Rôle de Distributeur (si nécessaire) : Si la LPAR redémarrée était le Distributor primaire :
   * Selon la configuration DVIPA (par exemple, le paramètre MOVE ou le rang), le DVIPA peut être redistribué à la LPAR qui vient de terminer son IPL. La LPAR secondaire reprendra alors son rôle de secours. Ce basculement est également conçu pour être non-disruptif pour les connexions existantes.
En conclusion, le Sysplex Distributor utilise les fonctionnalités du Dynamic VIPA (DVIPA) et du Workload Manager (WLM) pour rendre l'IPL d'une LPAR transparente ou du moins minimiser son impact sur l'accessibilité du service, en déplaçant dynamiquement la charge de travail et, si nécessaire, le rôle de distribution lui-même.
L'extrait Sysplex in a Nutshell est pertinent car il explique comment le Sysplex Distributor gère les scénarios de basculement de plan (planned takeover), ce qui est similaire au processus géré lors d'un IPL non-disruptif.

Les vues de vidéos YouTube seront stockées dans votre historique YouTube, et vos données seront stockées et utilisées par YouTube conformément à ses  Conditions d'utilisation

___________


En général, la philosophie du Sysplex Distributor (qui utilise les DVIPA) est de garantir que l'IPL (qu'il soit planifié ou non) d'une LPAR dans le Sysplex se fasse avec une indisponibilité minimale, voire nulle, pour le service global.
L'indisponibilité, si elle existe, est de courte durée et ne concerne que les éléments spécifiques à la LPAR en IPL.
1. IPL d'une LPAR Cible (Target LPAR)
Si la LPAR en IPL est simplement une des nombreuses cibles desservies (par exemple, une LPAR avec des régions CICS Application-Owning Region - AOR) :
 * Nouvelles Connexions : Il n'y a aucune indisponibilité du Sysplex Distributor. Le distributeur (qui est une autre LPAR) supprime immédiatement la LPAR en IPL de son pool de distribution. Les nouvelles requêtes sont redirigées vers les LPAR saines.
 * Connexions Existantes : Le seul impact est la perte immédiate de toutes les sessions TCP/IP actives sur cette LPAR. Le client verra sa connexion interrompue, mais une nouvelle tentative de connexion sera acheminée vers une LPAR disponible.
2. IPL de la LPAR Distributrice (Distributor LPAR)
Si la LPAR en IPL est celle qui détient le rôle actif de Distributeur primaire (c'est-à-dire qui possède le DVIPA distribué) :
 * Basculement DVIPA : Le basculement du DVIPA distribué vers la LPAR de secours (Backup Distributor ou Hot Standby) est quasi instantané (généralement mesuré en quelques secondes) grâce aux communications internes du Sysplex (XCF).
 * Indisponibilité : Il peut y avoir une micro-interruption le temps que le réseau converge et que la LPAR de secours reprenne la responsabilité de l'adresse DVIPA. Cependant, la conception vise à rendre ce basculement non-disruptif pour les sessions existantes, si la configuration est optimale. Les clients peuvent juste observer quelques retransmissions TCP sans perte de la session (selon la configuration et le type de basculement).
 * Redémarrage : Lorsque la LPAR termine son IPL et que sa pile TCP/IP redémarre, elle peut reprendre le rôle de distributeur primaire (si elle est configurée comme PREFERRED) ou reprendre son rôle de secours (BACKUP), sans perturber le routage déjà en cours.
Conclusion : Le Sysplex Distributor est un mécanisme de haute disponibilité. L'IPL d'une LPAR ne cause pas d'indisponibilité du Distributeur lui-même (le service de distribution perdure), mais il entraîne la perte définitive des connexions actives sur la LPAR qui s'arrête. Le but est de garantir que le service global reste accessible et que le travail puisse continuer sur les LPAR restantes.


_________



Oui, le Sysplex Distributor est par nature un composant réseau mutualisé (partagé) dans l'environnement z/OS Parallel Sysplex.
Il est au cœur de la stratégie d'IBM pour la mutualisation des ressources réseau et applicatives à travers plusieurs LPAR.
1. Principe de la Mutualisation par le Sysplex Distributor
Le terme "mutualisé" décrit parfaitement son rôle pour les raisons suivantes :
A. Mutualisation de l'Adresse IP (DVIPA)
Le Sysplex Distributor repose sur le concept de Distributed Dynamic VIPA (DDVIPA).
 * Une seule adresse IP (le DDVIPA) et un seul port sont utilisés par le client pour accéder à un service.
 * Cette adresse unique est mutualisée car elle est censée représenter plusieurs instances de serveurs d'applications s'exécutant sur différentes LPAR au sein du Sysplex.
B. Mutualisation de la Charge de Travail (Workload Balancing)
Le rôle principal du Sysplex Distributor est de distribuer (mutualiser) la charge de travail entrante (les connexions TCP/IP) parmi les différentes LPAR cibles disponibles.
 * Il utilise les informations de performance en temps réel fournies par le Workload Manager (WLM) pour choisir la LPAR la moins chargée.
 * Ceci permet d'utiliser la capacité combinée (mutualisée) de plusieurs LPAR pour un seul service, améliorant à la fois la performance et l'évolutivité.
C. Mutualisation de la Haute Disponibilité (HA)
Le Sysplex Distributor assure la continuité du service en cas de défaillance ou d'IPL (comme vu précédemment) d'une LPAR :
 * Le DDVIPA est géré par une LPAR distributrice primaire et une ou plusieurs LPAR de secours (backup/hot standby).
 * En cas d'arrêt de la LPAR distributrice primaire, le rôle bascule automatiquement et de manière transparente vers une LPAR de secours. Cette capacité de basculement (takeover) est une forme de mutualisation de la fonction de routage pour garantir la résilience.
2. Distinction avec le Partage de Port
Il est important de noter que le Sysplex Distributor est souvent utilisé en combinaison avec le Partage de Port (Port Sharing), mais ce sont des concepts distincts :
| Caractéristique | Sysplex Distributor | Partage de Port (SHAREPORT) |
|---|---|---|
| Niveau de Mutualisation | Inter-LPAR (à travers le Sysplex) | Intra-LPAR (au sein d'une seule pile TCP/IP) |
| Objectif | Répartition de la charge et HA sur plusieurs systèmes (LPARs) | Répartition de la charge sur plusieurs espaces d'adressage (applications) dans la même LPAR |
En résumé, le Sysplex Distributor permet aux clients de voir le Sysplex entier comme un point d'accès réseau unique et mutualisé pour l'application.
L'une des technologies clés utilisées pour cette mutualisation est le Dynamic VIPA, comme on peut le voir dans Sysplex in a Nutshell.

Les vues de vidéos YouTube seront stockées dans votre historique YouTube, et vos données seront stockées et utilisées par YouTube conformément à ses  Conditions d'utilisation
